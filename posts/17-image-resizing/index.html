<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>이미지 리사이징(feat. 썸네일) | 준모의 개발노트</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#ff3db4><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://jmpark6846.github.io/css/main.min.e34415025514319010e741089e6920454053855755ba465f66943ad102d2cb08.css></head><body><nav><header><div class=site-title><a href=/>준모의 개발노트</a></div></header><div class=nav-menu><a class="color-link nav-link" href=https://jmpark6846.github.io/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons></div><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><script src=https://jmpark6846.github.io/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script></footer></nav><div id=content class=content-container><h1 class=post-title>이미지 리사이징(feat. 썸네일)</h1><time>August 16, 2023</time><div><p><p>&lsquo;토픽&rsquo; 프로젝트를 하면서 이미지를 저장하고 로드하는 한 화면에 여러 썸네일을 보여줘야 했다.</p><p>처음에 썸네일 크기의 이미지를 불러오지 않고 원본 크기 이미지를 썸네일 이미지뷰에 넣어 개발하고 있었다.
그런데 <strong>한 화면에 보여주는 썸네일의 숫자가 많아지자 프로그램이 점점 느려지기 시작했다.</strong></p><p>처음에는 이미지를 불러오는 작업 자체가 오래 걸리는 건가 했는데 그게 아니었다.</p><p>썸네일 크기의 UIImageView에 원본이미지를 사용할때 느려졌다. <strong>UIImageView는 frame size 보다 큰 이미지를 보여주려고 할 때, 이미지의 줄이거나 일부를 자르는 작업을 자동으로 한다.</strong> 그런 이미지 갯수가 많아지니까 자연히 느려진 것. 너무 당연하게 생각했던 작업이라 여기서 시간이 많이 소요될 거라고 생각하지 못했다.</p><p>이미지를 리사이징 하는 방법을 알아본 결과 여러가지가 있었는데, 나는 속도가 빠르고 비교적 사용이 간편한 <code>ImageIO</code>를 활용한 방법을 참고했다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>resizedImage</span>(at url: URL, <span style=color:#66d9ef>for</span> size: CGSize) -&gt; UIImage? {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> options: [CFString: Any] = [
</span></span><span style=display:flex><span>        kCGImageSourceCreateThumbnailFromImageIfAbsent: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        kCGImageSourceCreateThumbnailWithTransform: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        kCGImageSourceShouldCacheImmediately: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        kCGImageSourceThumbnailMaxPixelSize: max(size.width, size.height)
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>guard</span> <span style=color:#66d9ef>let</span> imageSource = CGImageSourceCreateWithURL(url <span style=color:#66d9ef>as</span> NSURL, <span style=color:#66d9ef>nil</span>),
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>let</span> image = CGImageSourceCreateThumbnailAtIndex(imageSource, <span style=color:#ae81ff>0</span>, options <span style=color:#66d9ef>as</span> CFDictionary)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> UIImage(cgImage: image)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>참고: <a href=https://nshipster.com/image-resizing/>https://nshipster.com/image-resizing/</a></p></p></div><div class=page-footer><hr class=footer-divider><a class=tag href=/tags/ios>#ios</a>
<a class=tag href=/tags/image>#image</a></div></div><footer class=footer-mobile><div class=social-icons></div><div class=footer-mobile-links><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p></div><script src=https://jmpark6846.github.io/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script></footer></body></html>