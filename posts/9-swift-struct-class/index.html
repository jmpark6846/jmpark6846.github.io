<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>swift에서의 struct vs class | 준모의 개발노트</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#ff3db4><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://jmpark6846.github.io/css/main.min.e34415025514319010e741089e6920454053855755ba465f66943ad102d2cb08.css></head><body><nav><header><div class=site-title><a href=/>준모의 개발노트</a></div></header><div class=nav-menu><a class="color-link nav-link" href=https://jmpark6846.github.io/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons></div><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><script src=https://jmpark6846.github.io/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script></footer></nav><div id=content class=content-container><h1 class=post-title>swift에서의 struct vs class</h1><time>January 30, 2023</time><div><p><p>우선 스택과 힙 메모리에 대해 알아보자.</p><h2 id=메모리-스택과-힙-영역>메모리: 스택과 힙 영역</h2><p>변수에 값을 할당할때마다 메모리가 할당된다.</p><p>프로그램은 총 4가지 영역의 메모리 구성을 가진다.</p><ul><li>스택: 지역 변수 저장</li><li>힙: 동적 할당을 위한 공간</li><li>데이터: 전역 변수 저장</li><li>코드(텍스트): 실행할 코드를 저장함</li></ul><p>스택은 함수 코드가 실행될때마다 지역 변수가 스택에 하나씩 저장된다. 메모리에도 순서대로 저장된다.
함수가 종료되면 스택에 저장된 지역 변수들이 자동 할당 해제된다.</p><p>힙은 사용자(개발자)에 의해 관리되는 영역이다. 즉 필요한 만큼 메모리를 할당하고, 직접 해제하기 전까지 힙 영역에 남아있는다.</p><p>언어마다 이 메모리 관리에 대해 다르지만 몇몇 c언어 계열을 제외하면 대부분 garbage collector가 관리해주는 것 같다. (c언어의 3차원 배열과 <code>segmentation fault</code>의 추억..)</p><p>힙에 할당하면 그 객체의 인스턴스는 힙에 저장되고, 인스턴스를 가리키는 주소는 지역변수에 저장되므로 스택에 저장된다.</p><p>만약 인스턴스에 할당된 메모리를 할당해제 하지 않고 함수가 종료되면 메모리 누수(memory leak)가 발생한다.</p><p>메모리 누수는 작은 프로그램에서는 큰 일이 아니지만, 오랫동안 작동해야하는 서버 같은 경우 전체 머신을 느리게 만들거나 크래시가 발생하는 원인이 된다.</p><p>스택은 할당되고 해제되는 순서가 정해져있지만, 힙은 순서없이 사용자의 관리에 따라 해제되므로 메모리가 파편화된다. 이걸 방지하기 위한 메모리 할당 정책들이 있다</p><h2 id=struct-vs-class-in-swift>struct vs class in swift</h2><p>swift에서 구조체는 스택에 저장되고 클래스 인스턴스는 힙에 저장된다.</p><p>구조체와 클래스를 비교하면</p><p>구조체는</p><ul><li>빠르고</li><li>데이터가 모두 카피되고</li><li>완전한 불변성이다.</li><li>메모리 leak이 없고</li><li>쓰레드 세이프 하다.</li></ul><p>클래스는</p><ul><li>상속을 할 수 있고</li><li>오브젝트 c 코드와 함께 사용가능하다.</li></ul><p>애플은 커스텀 객체가 필요하면 우선 구조체로 먼저 만들고, 상속이 필요하거나 오브젝트c코드 사용이 필요할때만 클래스로 바꿀 것을 권고하고 있다</p></p></div><div class=page-footer><hr class=footer-divider><a class=tag href=/tags/swift>#swift</a>
<a class=tag href=/tags/cs>#cs</a></div></div><footer class=footer-mobile><div class=social-icons></div><div class=footer-mobile-links><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p></div><script src=https://jmpark6846.github.io/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script></footer></body></html>