---
title: "자바와 객체지향"
date: 2023-07-27T13:43:19+09:00
draft: true
summary: " "
tags: ["java", "OOP"]
---

# Logback

로그 레벨
* ERROR: 로직 수행 중에 시스템에 심각한 문제가 있어 애플리케이션이 작동 불가능한 경우
* WARN: 시스템 에러의 원인이 될 수 있는 경고 레벨
* INFO: 애플리케이션의 상태 변경과 같은 정보 전달을 위해 사용
* DEBUG: 애플리케이션의 디버깅한 메세지 표시
* TRACE: DEBUG 레벨 보다 더 상세한 메세지 표시

로그백 설정
설정 파일에서는 appender, encoder, root 크게 세 가지를 유의하자.

appender 영역
* 로그 출력 형태 설정
* 대표적인 appender들
  * ConsoleAppender: 콘솔에 로그 출력
  * FileAppender: 파일에 로그 저장
  * RollingFileAppender: 여러 개의 파일을 순회하면서 로그 저장
    * 
  * SMTPAppender: 메일로 로그 저장
  * DBAppender: 데이터베이스에 로그 저장

encoder
* 로그 표현 형식을 패턴으로 정의
* 대표적인 패턴
  * %Logger{length}: 로거의 이름
  * %-5level: 로그레벨, -5는 출력 고정폭 값
  * %msg(%message): 로그 메세지
  * %d: 로그 기록 시간 
  * 그 외 로깅이 발생한 메서드 이름, 현재 스레드명 등 여러 패턴이 있다.

root 영역
* 설정 파일에 정의된 appender를 활용하려면 root 영역에서 appender를 참조해서 로깅레벨을 설정한다.

* 특정 패키지에 대해 다른 로깅 레벨을 설정하고 싶다면 root대신 logger를 사용할 수 있다.



# 영속성 전이

특정 엔티티의 영속성 상태를 변경할 때 그 엔티티와 연관된 엔티티의 영속성을 같이 변경하는 것
* ALL: 모든 영속 상태 변경에 대해 영속성 전이 적용
* PERSIST: 엔티티가 영속화 할때 연관된 엔티티도 함께 영속화
* MERGE: 엔티티를 영속성 컨텍스트에 병합할떄 연관된 엔티티도 함께 병합
* REMOVE: 엔티티를 제거할때 함께 제거
* REFRESH: 엔티티를 새로고침할 때 연관된 엔티티도 함께 새로고침
* DETACH: 엔티티를 영속성 컨텍스트에서 제외하면 연관된 엔티티도 함께 제외




# 데이터베이스
### 데이터베이스의 기본 기능 
1) 데이터 검색과 갱신
   1) 검색
      * 데이터베이스에 요구되는 가장 중요한 기능.
      * 원하는 데이터를 재빨리 끄집어낼 수 없다면 데이터베이스를 사용하는 의미가 없다.
   2) 갱신(등록, 수정, 제거)
2) 동시성 제어 
   * 데이터베이스를 복수의 사용자가 동시에 공유하고 이용하려고 한다면 같은 데이터를 갱신하는 상황에 대한 제어 필요.
   * 복수 사용자의 갱신을 조절하기 위한 기능을 데이터베이스의 중요한 두번째 기능인 '동시성 제어' 또는 '배타 제어'라고 한다.
3) 장애 대응
  * 데이터 소실 문제의 대책
    - 데이터 다중화: 데이터를 한 곳이 아니라 복수의 장소에 분산해서 유지하여, 데이터의 완전 소실을 막는 방법
    - 백업: 데이터 소실 시 데이터를 복원하는 방법
4) 보안


### 관계형 데이터베이스
관계형(Relational)의 의미
* 관계(Relation)에서 파생된 단어이지만 번역상 어투. 인간관계, 국제관계 에서의 관계와 의미가 다름.
* 관계형 데이터베이스의 관계는 2차원 표를 표기할 때 사용하는 단어. 
* 즉 관계형 데이터베이스는 데이터를 2차원 표를 사용해 관리하는 데이터베이스

* 시스템을 구축할 때 사용하는 소프트웨어는 크게 3가지로 **운영체제, 미들웨어, 애플리케이션**이며 데이터베이스는 '중간 소프트뒈어'인 미들웨어에 속한다. 즉 데이터베이스는 운영체제에 설치하여 움직인다. 
* 운영체제와 DBMS의 여러 조합이 가능하다. 하지만 현실에서는 운영체제와 DBMS 제품마다 조작하는 법이 크게 차이나는 경우가 있어 한 쪽에 익숙한 엔지니어는 다른 쪽을 제대로 사용하지 못하는 경우가 많다.




### 데이터베이스와 비용
초기비용: 최초에 지급하는 돈
운영비용: 서비스를 이용하는 기간에 계속해서 지급하는 돈

데이터베이스의 초기비용
* 소프트웨어 사용허가료인 라이선스 요금

소프트웨어 라이센스 요금의 특징
1) 판매단위가 특수하다.
2) 운영비용을 지급하지 않으면 현실적으로 사용할 수 없다.

라이센스의 두 가지 판매 단위(방식)
* 프로세서 라이센스
  * DBMS를 설치해서 동작하는 하드웨어(DB 서버)의 CPU 성능에 따라 가격이 결정된다. 즉 DB서버의 프로세서 수에 비례.
  * 사용자 수가 많거나 불특정 다수가 이용해서 사용자 수를 가늠하기 어려운 경우 적용.
  * 대부분 여기에 해당
* 사용자 라이센스
  * 사용자 수에 비례. 사용자 수가 적은 폐쇄된 네트워크에 사용.

데이터베이스의 운영비용
* 데이터베이스의 운영비용은 '기술지원 비용'이다. 
* DBMS 자체도 프로그램이며 버그나 알수없는 에러로 인해 동작이 멈춘다. 그런 경우에 필요한 것이 기술지원이다.
  * 기술 Q&A
  * 버그 수정을 위한 프로그램 배포
  * 최신 버전으로 업데이트 권리
  * 새로운 OS나 하드웨어에 대응
  * 전문 기술자나 컨설턴트를 통한 문제해결

* 기술지원이 없는 소프트웨어로 상용 시스템을 만들어 운용하는 것은 매우 위험하다. 사고가 일어났을 때 자력으로 해결해야하며, 그것대로 비용이 들고 해결할 수 있다는 보장이 없다(회사에서 개발한 프로그램의 문제가 아니라 DBMS의 문제이기 때문)

라이선스와 섭스크립션
* 가장 큰 차이는 사용허가 기한의 유무
* 라이선스는 돈을 지급하면 기본적으로 무기한 사용 가능
* 섭스크립션은 기한 동안 사용허가. 요금에는 운영비용이 포함되어 있어, 버그 수정, 업데이트제공 컨설팅 지원 등이 포함되어있다.